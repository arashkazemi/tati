<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Tati</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Tati</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Tati<span class="signature">(step_callback, stop_callback, error_callback, config)</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="Tati"><span class="type-signature"></span>new Tati<span class="signature">(step_callback, stop_callback, error_callback, config)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Creates an instance of Tati.
There can be multiple instances and each can be controlled separately.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>step_callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            
                <td class="default">
                
                    null
                
                </td>
            

            <td class="description last"><p>The callback handler for stepping. It is
called before the runner runs a breakpoint or steps to the next line.
The row and column of the next step is given as the first and second
arguments. If the watch flag is set, a third argument of watches values
is also passed to the callback. The watched values is a dictionary,
containing values of the local variables before running that step. If a
variable is shadowed by another, the most recent value is shown.</p>
<p>If the step callback returns true, the execution will be paused until one of
the functions <code>step()</code> or <code>continue()</code> is called. If it returns false the
execution continues to the step or breakpoint.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stop_callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            
                <td class="default">
                
                    null
                
                </td>
            

            <td class="description last"><p>Is called when the running of the code is
finished.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>error_callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            
                <td class="default">
                
                    null
                
                </td>
            

            <td class="description last"><p>Is called when there is an error in parse
or run time. The first and second arguments are the line and column,
third argument would be the type of error (parse or runtime), and the
forth would be the error description.</p>
<p>In case of parser errors, if <code>error_callback</code> argument is given to the
constructor, Tati will call it.</p>
<p>In case of runtime errors, if <code>error_callback</code> argument is given to the
constructor, Tati will call it. But it will not cancel the event or stop
its propagation so it doesn't interfere with any other code handling mechanism.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Instance configuration. It contains the following
properties:</p>
<p><code>default_root</code> (any): The <code>this</code> of the script being run. It is an empty
object {} by default. It is important because it masks the Tati object.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line128">line 128</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="STOPPED"><span class="type-signature"></span>STOPPED<span class="type-signature"></span></h4>




<div class="description">
    <p>Returns the running status.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line689">line 689</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="clearAllBreakpoints"><span class="type-signature"></span>clearAllBreakpoints<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Clears all the breakpoints.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line588">line 588</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="clearBreakpoint"><span class="type-signature"></span>clearBreakpoint<span class="signature">(line)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Clears the breakpoint on the given line.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>line</code></td>
            

            <td class="type">
            
                
<span class="param-type">integer</span>


            
            </td>

            

            

            <td class="description last"><p>The breakpoint line.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line579">line 579</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="configureUIRefreshRate"><span class="type-signature"></span>configureUIRefreshRate<span class="signature">(ui_refresh_steps, ui_refresh_time)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Configures the UI refresh checking. This is to make sure UI is responsive
and specially the process is pausable, which cannot be ensured on every
cycle because of performance considerations. As a result, UI refresh config
is not for a precise flow control, for a precise control use the
<code>step_callback</code> return value. For more info see Tati#constructor.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ui_refresh_steps</code></td>
            

            <td class="type">
            
                
<span class="param-type">integer</span>


            
            </td>

            

            

            <td class="description last"><p>How many steps to take before refreshing
the UI.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ui_refresh_time</code></td>
            

            <td class="type">
            
                
<span class="param-type">integer</span>


            
            </td>

            

            

            <td class="description last"><p>The time it will wait before continuing
the process.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line532">line 532</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="continue"><span class="type-signature"></span>continue<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Runs to the next breakpoint or end.
It will call the <code>step_callback</code> that was given to constructor on
reaching a breakpoint.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line480">line 480</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="debug"><span class="type-signature"></span>debug<span class="signature">(run_to_breakpoint)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Runs the prepared code <strong>with</strong> the debug codes.
You can step line by line or run until reaching a breakpoint. It will
call the <code>step_callback</code> that was given to constructor.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>run_to_breakpoint</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>If true it will continue running
until reaching a breakpoint. If false, it will step line by line.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line392">line 392</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getCode"><span class="type-signature"></span>getCode<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Returns the last prepared code.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line543">line 543</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getContextList"><span class="type-signature"></span>getContextList<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Returns the list of context variables.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line661">line 661</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getContextValue"><span class="type-signature"></span>getContextValue<span class="signature">(varname)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Returns the value of a context variable. This can be used to access
the results of the script being debugged. Of course, the only types
that can be modified from inside the scripts are arrays and objects,
i.e. the variables that are passed by reference and not by value.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>varname</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The variable name.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line652">line 652</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getTimers"><span class="type-signature"></span>getTimers<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Returns the list of working timers.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line671">line 671</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="pause"><span class="type-signature"></span>pause<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Pauses the script. When the script is running an intensive loop or process,
checking for pause command will be done in intervals, which can be configured
using <a href="Tati.html#configureUIRefreshRate">Tati#configureUIRefreshRate</a>.</p>
<p>When an script with a timeout or interval is being debugged but no breakpoint
is set, pause will be applied on the next callback, Tati will prevent timer
callback execution, but it doesn't stop the runtime event loop, so they will
expire as defined.</p>
<p>Also note that Tati can only pause inside the given script and cannot
enter the called functions that are defined elsewhere, i.e. native functions
or external libraries.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line509">line 509</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="prepare"><span class="type-signature"></span>prepare<span class="signature">(code, watch_locals, step_loop_args, is_module)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Parses the given code, and prepares it for the flow with control,
throws exception if there is a syntax problem in code.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>code</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The javascript code to compile/run.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>watch_locals</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last"><p>If set, the callback will receive a
snapshot of the local variables in an object too.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>step_loop_args</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last"><p>If set, it will also step into
loop test and update expressions, like <code>i&lt;n</code> and <code>i++</code> in the loop:</p>
<pre><code>       for( let i=0; i&lt;n; i++ ) {...}
</code></pre></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>is_module</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>If set, the code will be treated as module,
i.e. import and export statements will work, otherwise they will raise
an unexpected token error in parse time. Note that imports cannot be
executed, because normal import statements must be the top-level of a module
and this cannot be the case when tati is wrapping the code. Also <code>import()</code>
function is supported by Tati, but unfortunately acorn doesn't support
it yet and therefore raises a parser error exception.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line196">line 196</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="run"><span class="type-signature"></span>run<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Runs the prepared code as it is, <strong>without</strong> the debug codes.
The only difference is that it is processed anyway, so the flow and
the environment of the two debug/run procedures are the same.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line314">line 314</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setAllBreakpoints"><span class="type-signature"></span>setAllBreakpoints<span class="signature">(bps)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets all breakpoints.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>bps</code></td>
            

            <td class="type">
            
                
<span class="param-type">integer</span>


            
            </td>

            

            

            <td class="description last"><p>The breakpoint line. Breakpoints should be in the
form of { 5: true, 10: true } where the keys are the line numbers
and the breakpoint is only set if the value is exactly true.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line568">line 568</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setBreakpoint"><span class="type-signature"></span>setBreakpoint<span class="signature">(line)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets a breakpoint on the given line.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>line</code></td>
            

            <td class="type">
            
                
<span class="param-type">integer</span>


            
            </td>

            

            

            <td class="description last"><p>The breakpoint line.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line555">line 555</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setContext"><span class="type-signature"></span>setContext<span class="signature">(context, masked)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets context variables. The members of the context will be set
as given in this object. The masked argument can be used to define
the variables and objects to be masked. Note that the masked are
given in a list of strings.</p>
<pre><code>k.setContext({foo:123, bar:&quot;hello&quot;}, [document, window]);
</code></pre>
<p>The masked list is not necessary, but for limiting the access scope
remember to mask <code>globalThis</code>, <code>window</code>, self and the
class name of Tati, which is normally Tati itself.</p>
<p>This function should be called before calling <code>prepare</code> if the keys
of the context or the members of the masked list are changed. But it
won't be necessary if only the values of context variables are
changed later.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>context</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>The new context object.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>masked</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>The list of the objects and variables to be
masked to <code>undefined</code>.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line616">line 616</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setContextVariable"><span class="type-signature"></span>setContextVariable<span class="signature">(varname, value)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets or defines context variables. Like <code>setContext</code>, the prepare
function should be called after adding new context properties.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>varname</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The variable name.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">any</span>


            
            </td>

            

            

            <td class="description last"><p>The new value.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line638">line 638</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="step"><span class="type-signature"></span>step<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Steps to the next line/expression.
It will call the <code>step_callback</code> that was given to constructor.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tati.js.html">tati.js</a>, <a href="tati.js.html#line463">line 463</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Tati.html">Tati</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>